!function($){$.fn.sharp_list=function(e){var t={sortable:!1,addable:!1,removable:!1,sortableItems:".sharp-list-item",addButton:{className:"btn",text:"add item"},onDeleteItem:function(e){return!0},itemDeleted:function(){},itemCreated:function(){},itemsSorted:function(e){}},a=$.extend(t,e);return this.each(function(){var e=$(this);if(a.addable){var t=$(this).find(".sharp-list-item.template");t.find("input, select, textarea").attr("disabled","disabled");var i=$("<a/>").addClass(a.addButton.className).addClass("sharp-list-add").html(a.addButton.text),s=$("<li/>").addClass("list-group-item sharp-list-item-add").append(i);t.before(s),i.click(function(e){e.preventDefault();var i=t.clone();i.addClass("sharp-list-item");var d="N_"+Math.random().toString(36).substr(2,9);i.find("input, select, textarea").each(function(){$(this).removeAttr("disabled");var e=$(this).attr("name");e=e.replace(/(--N--)/i,d),$(this).attr("name",e)}),i.find(".sharp-list-item-id").val(d),s.before(i),i.fadeIn("fast"),a.itemCreated(i)})}a.removable&&$(this).on("click",".sharp-list-remove",function(e){e.preventDefault(),$item=$(this).parents(".sharp-list-item"),a.onDeleteItem($item)&&$item.fadeOut("fast",function(){a.itemDeleted($item)})}),a.sortable&&$(this).sortable({items:a.sortableItems,axis:"y",handle:".sort-handle",helper:function(e,t){var a=t.children(),i=t.clone();return i.children().each(function(e){$(this).width(a.eq(e).width())}),i},update:function(t,i){a.itemsSorted(e)}})})}}(jQuery),$(window).load(function(){$(".sharp-list").each(function(){var e={};void 0!=$(this).data("sortable")&&(e.sortable=1==$(this).data("sortable")),void 0!=$(this).data("removable")&&(e.removable=1==$(this).data("removable")),void 0!=$(this).data("addable")&&(e.addable=1==$(this).data("addable")),void 0!=$(this).data("add_button_text")&&(e.addButton={text:'<i class="fa fa-plus"></i> '+$(this).data("add_button_text"),className:"btn"}),$(this).sharp_list($.extend(e,{itemCreated:function(e){e.removeClass("template"),e.find(".sharp-file-template").each(function(){$(this).removeClass("sharp-file-template").addClass("sharp-file"),createSharpFile($(this))}),e.find(".sharp-markdown-template").each(function(){$(this).removeClass("sharp-markdown-template").addClass("sharp-markdown"),createSharpMarkdown($(this))}),e.find(".sharp-date-template").each(function(){$(this).removeClass("sharp-date-template").addClass("sharp-date"),createSharpDate($(this))}),e.find(".sharp-ref-template").each(function(){$(this).removeClass("sharp-ref-template").addClass("sharp-ref"),createSharpRef($(this))}),e.find(".sharp-tags-template").each(function(){$(this).removeClass("sharp-tags-template").addClass("sharp-tags"),createSharpTags($(this))}),e.find(".sharp-field-embed").each(function(){key=e.find(".sharp-list-item-id").val(),$(this).find(".sharp-embed-update").each(function(){href=$(this).prop("href"),href=href.replace(/(--N--)/i,key),$(this).prop("href",href)}),$(this).find(".sharp-embed-delete").each(function(){fieldname=$(this).data("fieldname"),fieldname=fieldname.replace(/(--N--)/i,key),$(this).data("fieldname",fieldname)})}),e.find(".sharp-field[data-conditional_display]").each(function(){manageConditionalDisplay($(this))})},itemDeleted:function(e){e.remove()}}))})});